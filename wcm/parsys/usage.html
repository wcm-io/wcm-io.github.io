
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2023-12-15
 Rendered using Reflow Maven Skin 1.1.0 (https://github.com/wcm-io/wcm-io-tooling/tree/develop/maven/skins/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

  <head>
    <meta charset="UTF-8" />
    <title>Parsys usage | wcm.io</title>

    <link rel="shortcut icon" href="https://wcm.io/images/favicon.ico">
    <link rel="apple-touch-icon" href="https://wcm.io/images/favicon-152.png">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="wcm.io - Libraries and extensions for AEM applications" />
    <meta http-equiv="content-language" content="en" />

    <link href="https://wcm.io/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://wcm.io/css/docs.css" rel="stylesheet" />
    <link href="https://wcm.io/css/reflow-skin.css" rel="stylesheet" />
    <link href="https://wcm.io/css/highlightjs-style-github.min.css" rel="stylesheet" />

    <link href="https://wcm.io/css/lightbox.css" rel="stylesheet" />

    <link href="https://wcm.io/css/site.css" rel="stylesheet" />
    <link href="https://wcm.io/css/print.css" rel="stylesheet" media="print" />


  </head>

  <body class="page-usage project-io.wcm.wcm.parsys" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../..">wcm.io</a>
          <div class="nav-collapse collapse" id="top-nav-collapse">
            <ul class="nav pull-right">
              <li ><a href="https://github.com/wcm-io" title="GitHub project" class="externalLink">GitHub project</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Categories <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li ><a href="../" title="WCM">WCM</a></li>
                  <li ><a href="../../dam/" title="DAM">DAM</a></li>
                  <li ><a href="../../caconfig/" title="Context-Aware Configuration">Context-Aware Configuration</a></li>
                  <li ><a href="../../handler/" title="Handler">Handler</a></li>
                  <li ><a href="../../sling/" title="Sling Extensions">Sling Extensions</a></li>
                  <li ><a href="../../testing/" title="Testing">Testing</a></li>
                  <li ><a href="../../samples/" title="Samples">Samples</a></li>
                  <li ><a href="../../tooling/" title="Tooling">Tooling</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li ><a href="../../contribute.html" title="Contribute">Contribute</a></li>
                  <li ><a href="../../manifest.html" title="Manifest">Manifest</a></li>
                  <li ><a href="https://github.com/wcm-io" title="Issues" class="externalLink">Issues</a></li>
                  <li ><a href="https://wcm-io.atlassian.net/wiki/" title="Wiki" class="externalLink">Wiki</a></li>
                  <li ><a href="../../mailing-lists.html" title="Mailing Lists">Mailing Lists</a></li>
                  <li ><a href="https://github.com/wcm-io" title="Fork on GitHub" class="externalLink">Fork on GitHub</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

  <div class="container">

  <!-- Masthead
  ================================================== -->

  <header>
  <div class="jumbotron subhead">
    <div class="row" id="banner">
      <div class="span12">
        <div class="pull-left">
          <a href="../../" id="bannerLeft"><h1><img src="https://wcm.io/images/favicon-16@3x.png"/> wcm.io</h1></a>
          <p class="lead">Libraries and extensions for AEM applications</p>
        </div>
        <div class="pull-right">
        </div>
      </div>
    </div>
  </div>
    <div>
      <ul class="breadcrumb">
        <li><a href="../../" title="wcm.io">wcm.io</a></li>
        <li class="divider">/</li>
        <li><a href="../" title="WCM">WCM</a></li>
        <li class="divider">/</li>
        <li><a href="./" title="WCM Parsys">WCM Parsys</a></li>
        <li class="divider">/</li>
        <li>Parsys usage</li>
      </ul>
    </div>
  </header>

  <div class="main-body">
  <div class="row">
    <div class="span8">
      <div class="body-content">
<section> 
 <div class="page-header">
  <h2 id="Parsys_usage">Parsys usage</h2>
 </div> 
 <section> 
  <h3 id="Paragraph_system_in_sightly_template">Paragraph system in sightly template</h3> 
  <p>To use the paragraph system in your sightly template:</p> 
  <div class="source"> 
   <pre><code class="language-html">&lt;sly data-sly-resource="${'./content'
    @ resourceType='wcm-io/wcm/parsys/components/parsys'}" /&gt;
</code></pre> 
  </div> 
 </section> 
 <section> 
  <h3 id="Configure_allowed_components">Configure allowed components</h3> 
  <p>To define which components are allowed in your paragraph system you create a node <code>wcmio:parsysConfig</code> in your page component (similar to nodes like <code>cq:dialog</code> and <code>cq:editConfig</code>). Example:</p> 
  <div class="source"> 
   <pre><code class="language-json">"wcmio:parsysConfig": {
  "jcr:primaryType": "nt:unstructured",
  "paths": {

    /* Allowed components in jcr:content/content node */
    "content": {
      "allowedChildren": [
        "myapp/components/component1"
      ]
    },

    /* Allowed components in jcr:content/leftcol/teasers node */
    "leftcol_teasers": {
      "path": "jcr:content/leftcol/teasers",
      "allowedChildren": [
        "myapp/components/component1",
        "myapp/components/component2"
      ]
    },

    /* Allowed components in a nested parsys 'customparsys'  */
    "nested_parsys": {
      "pattern": "^jcr:content/.*$",
      "allowedParents": [
        "myapp/components/customparsys"
      ],
      "allowedChildren": [
        "myapp/components/subcomponent1",
        "myapp/components/subcomponent2"
      ]
    }

  }
}
</code></pre> 
  </div> 
  <p>A <code>wcmio:parsysConfig</code> contains always a <code>paths</code> node defining the allowance definition. Each definition has node name, and a set of properties defining the allowance. Supported properties:</p> 
  <ul> 
   <li> <p><b>allowedChildren</b>: Array with resource types of the components allowed for this path definition.</p> </li> 
   <li> <p><b>deniedChildren</b>: Array with resource types not allowed at the defined position. This allows neglecting allowances defined in super resource types.</p> </li> 
   <li> <p><b>path</b>: Optional. Defines the exact relative of the paragraph system inside the page relative to page root node (without leading slash but including <code>jcr:content</code>). If this property is not set it is derived from the node name of the path definition. In this case the node name is prefixed with <code>jcr:content/</code>. If you want to define a deeper path you have to specify the <code>path</code> property.</p> </li> 
   <li> <p><b>pattern</b>: Optional. Instead of the <code>path</code> property you can define a regular expression for matching the relative path (again, without leading slash, but including <code>jcr:content</code>). The component is allowed for all paragraph systems for which the path pattern matches.</p> </li> 
   <li> <p><b>allowedParents</b>: Optional. Defines an additional restriction to the path or path pattern to allow components only below certain parent components. The parent components are references by their resource types.</p> </li> 
   <li> <p><b>parentAncestorLevel</b>: Optional. Only supported together with <code>allowedParents</code>. Two possible values are allowed:</p> 
    <ul> 
     <li><b>1</b>: <code>allowedParents</code> restriction is applied to the paragraph system component itself (the direct parent of the component). This is the default mode.</li> 
     <li><b>2</b>: <code>allowedParents</code> restriction is applied to the component that contains the paragraph system (the grand-parent of the component).</li> 
    </ul> </li> 
   <li> <p><b>inherit</b>: If you have an inheritance hierarchy of page components using <code>sling:resourceSuperType</code> you can define a <code>wcmio:parsysConfig</code> on each level of this hierarchy. The definitions are merged together according to the inheritance hierarchy. Thus it is possible to centrally define global allowed components rules for all page components in your application. If you want to disabled this behavior add this this property and set it to false.</p> </li> 
  </ul> 
  <p>Via the OSGi factory configuration <i>wcm.io Paragraph System Configuration Extension</i> it is possible to define additional allowed components definitions via the Felix Console. It supports the same properties as listed above, and additionally:</p> 
  <ul> 
   <li><b>pageComponentPath</b>: Resource type of the page component this configuration should apply to</li> 
  </ul> 
 </section> 
 <section> 
  <h3 id="Customize_the_paragraph_system_markup">Customize the paragraph system markup</h3> 
  <p>You can set the following property in the component node of the paragraph system to customize the markup:</p> 
  <ul> 
   <li> <p><b>wcmio:parsysGenerateDefaultCss</b>: Generates CSS classes by default: “section” on each paragraph/new area and “clear:both” on a new area. This is a boolean property and defaults to true if not set.</p> </li> 
   <li> <p><b>wcmio:parsysParagraphCss</b>: Defines additional custom CSS classes to be set on each paragraph.</p> </li> 
   <li> <p><b>wcmio:parsysNewAreaCss</b>: Defines additional custom CSS classes to be set on the new area.</p> </li> 
   <li> <p><b>wcmio:parsysParagraphElement</b>: Sets the element name to be used for the element wrapping each paragraph component. Defaults to decoration tag name of the component.</p> </li> 
   <li> <p><b>wcmio:parsysParagraphNoDecorationWcmMode</b>: Can be set to a list of WCM modes. When one of the given WCM modes is active, the decoration tag for the paragraph items is not rendered.</p> </li> 
   <li> <p><b>wcmio:parsysParagraphValidate</b>: If set to true, each paragraph item is validated. If it is not valid, it's hidden when <code>wcmmode=disabled</code>. To validate the paragraph item a Sling Model has to be implemented registered to the adapter <code>io.wcm.wcm.parsys.ParsysItem</code> and the resource type of the paragraph item's resource.</p> </li> 
   <li> <p><b>wcmio:parsysWrapperElement</b>: Sets the element name to be used for the element wrapping the whole paragraph system. If not set no wrapping element is generated for the paragraph system.</p> </li> 
   <li> <p><b>wcmio:parsysWrapperCss</b>: Defines custom CSS classes to be set on the wrapper element.</p> </li> 
  </ul> 
  <p>Example:</p> 
  <div class="source"> 
   <pre><code>{
  "jcr:primaryType": "cq:Component",
  "sling:resourceSuperType": "wcm-io/wcm/parsys/components/parsys",
  "cq:isContainer": true,
  "wcmio:parsysWrapperElement": "ul",
  "wcmio:parsysWrapperCss": "link-list",
  "wcmio:parsysParagraphElement": "li",
  "wcmio:parsysParagraphCss": "link-list-item",
  "wcmio:parsysNewAreaCss": "link-list-item"
}
</code></pre> 
  </div> 
  <p>Notes:</p> 
  <ul> 
   <li>The properties <b>wcmio:parsysParagraphCss</b> and <b>wcmio:parsysParagraphElement</b> do not work properly when inserting or editing components without configuring a REFRESH_PARENT event on the <code>afterinsert</code> and <code>afteredit</code> events for the child components. It is recommended to use <code>cq:htmlTag</code> definition on the parsys child components instead - example:</li> 
  </ul> 
  <div class="source"> 
   <pre><code>{
  "jcr:primaryType": "cq:Component",
  "jcr:title": "My Component",
  "cq:htmlTag": {
    "cq:tagName": "li",
    "class": "link-list-item"
  }
}
</code></pre> 
  </div> 
  <ul> 
   <li>Although technically possible it is not recommended to copy and overlay the Sightly script of the paragraph system, it may change in future versions.</li> 
  </ul> 
 </section> 
</section>
      </div>
    </div>
    <div class="span4">
      <div id="toc-sidebar">
        <div class="well">
          <ul class="nav nav-list">
            <li class="nav-header">Table of Contents</li>
    <li class="dropdown"><a href="#Parsys_usage" title="Parsys usage">Parsys usage <b class="caret"></b></a>
      <ul class="nav nav-list">
    <li><a href="#Paragraph_system_in_sightly_template" title="Paragraph system in sightly template">Paragraph system in sightly template</a>
    <li><a href="#Configure_allowed_components" title="Configure allowed components">Configure allowed components</a>
    <li><a href="#Customize_the_paragraph_system_markup" title="Customize the paragraph system markup">Customize the paragraph system markup</a>
        <li class="divider"></li>
      </ul>
    </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  </div>

  </div>

  <!-- Footer
  ================================================== -->
  <footer class="well">
    <div class="container">
      <div class="row">
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Main</li>
            <li >
              <a href="../../" title="Home">Home</a>
            </li>
            <li >
              <a href="../../platforms.html" title="Platforms">Platforms</a>
            </li>
            <li >
              <a href="../../maven.html" title="Maven Repositories">Maven Repositories</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="GitHub project" class="externalLink">GitHub project</a>
            </li>
            <li >
              <a href="../../subprojects.html" title="Subprojects">Subprojects</a>
            </li>
            <li >
              <a href="http://www.apache.org/licenses/LICENSE-2.0.txt" title="License" class="externalLink">License</a>
            </li>
            <li >
              <a href="../../commercial-support.html" title="Commercial Support">Commercial Support</a>
            </li>
            <li >
              <a href="https://diva-e.com/en/imprint/" title="Imprint" class="externalLink">Imprint</a>
            </li>
            <li >
              <a href="../../privacy.html" title="Privacy Policy">Privacy Policy</a>
            </li>
          </ul>
        </div>
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Categories</li>
            <li >
              <a href="../" title="WCM">WCM</a>
            </li>
            <li >
              <a href="../../dam/" title="DAM">DAM</a>
            </li>
            <li >
              <a href="../../caconfig/" title="Context-Aware Configuration">Context-Aware Configuration</a>
            </li>
            <li >
              <a href="../../handler/" title="Handler">Handler</a>
            </li>
            <li >
              <a href="../../sling/" title="Sling Extensions">Sling Extensions</a>
            </li>
            <li >
              <a href="../../testing/" title="Testing">Testing</a>
            </li>
            <li >
              <a href="../../samples/" title="Samples">Samples</a>
            </li>
            <li >
              <a href="../../tooling/" title="Tooling">Tooling</a>
            </li>
          </ul>
        </div>
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Contribute</li>
            <li >
              <a href="../../contribute.html" title="Contribute">Contribute</a>
            </li>
            <li >
              <a href="../../manifest.html" title="Manifest">Manifest</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="Issues" class="externalLink">Issues</a>
            </li>
            <li >
              <a href="https://wcm-io.atlassian.net/wiki/" title="Wiki" class="externalLink">Wiki</a>
            </li>
            <li >
              <a href="../../mailing-lists.html" title="Mailing Lists">Mailing Lists</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
            </li>
          </ul>
        </div>
        <div class="span3 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Maven documentation</li>
            <li >
              <a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
            </li>
            <li >
              <a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
            </li>
          </ul>
        </div>
        <div class="span3 bottom-description">
          <blockquote>wcm.io is an Open Source project which provides libraries and extensions for AEM-based applications.</blockquote>
        </div>
      </div>
    </div>
  </footer>

  <div class="container subfooter">
    <div class="row">
      <div class="span12">
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p class="copyright">Copyright &copy;2014-2023 <a href="https://wcm.io">wcm.io</a>. All Rights Reserved.</p>
        <p class="version-date"><span class="projectVersion">Version: 1.7.1-SNAPSHOT. </span><span class="publishDate">Last Published: 2023-12-15. </span></p>
      </div>
    </div>
  </div>

  <!-- JavaScript
  ================================================== -->
  <script src="https://wcm.io/js/jquery.min.js"></script>
  <script src="https://wcm.io/js/bootstrap.min.js"></script>
  <script src="https://wcm.io/js/lightbox.min.js"></script>
  <script src="https://wcm.io/js/reflow-scroll.js"></script>
  <script src="https://wcm.io/js/highlight.min.js"></script>


  <script src="https://wcm.io/js/reflow-skin.js"></script>

  </body>
</html>