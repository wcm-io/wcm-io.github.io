<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src/site/markdown/rest-interface.md at 2021-09-05

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>DAM Asset Service &#x2013; Asset Service REST Interface</title>
    <link rel="stylesheet" href="./css/maven-base.css" />
    <link rel="stylesheet" href="./css/maven-theme.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
  </head>
  <body class="composite">
    <div id="banner">
<div id="bannerLeft">DAM Asset Service
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xleft">
        <span id="publishDate">Last Published: 2021-09-05</span>
          &#xA0;| <span id="projectVersion">Version: 1.4.1-SNAPSHOT</span>
      </div>
      <div class="xright"><a href="./" title="DAM Asset Service">DAM Asset Service</a>      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>Parent Project</h5>
    <ul>
     <li class="none"><a href="../index.html" title="DAM Extensions">DAM Extensions</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
      <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
<section>
<h2><a name="Asset_Service_REST_Interface"></a>Asset Service REST Interface</h2><section>
<h3><a name="Resolve_assets"></a>Resolve assets</h3>
<p>To get the asset metadata for a certain asset path use an URL with this syntax:</p>

<div class="source">
<div class="source">
<pre>&lt;cms-hostname&gt;&lt;asset_path&gt;.wcm-io-asset-service.json/&lt;suffix-params-1&gt;/.../&lt;suffix-params-n&gt;.json
</pre></div></div>

<p>After the asset path the selector <code>.wcm-io-asset-service.json</code> has to be added. This selector name can be changed in the <a href="configuration.html">configuration</a>.</p>
<p>Optionally a set of further suffix parameters each separated by &#x2018;<code>/</code>&#x2019; can be added. Each set consists of key-value pairs. Each pair is separated by &#x2018;<code>,</code>&#x2019;, the key and value are separated by &#x2018;<code>=</code>&#x2019;. The whole suffix string is terminated with another <code>.json</code>. Example:</p>

<div class="source">
<div class="source">
<pre>&lt;cms-hostname&gt;&lt;asset_path&gt;.wcm-io-asset-service.json/width=200,height=100/mediaFormat=mediaformat1.json
</pre></div></div>

<p>The list of supported parameters in the suffix sets:</p>
<table border="0" class="bodyTable">
<thead>

<tr class="a">
<th> Parameter     </th>
<th align="center"> Multiple </th>
<th> Description</th></tr>
</thead><tbody>

<tr class="b">
<td> <code>mediaFormat</code> </td>
<td align="center"> X        </td>
<td> Specifies internal media format name of the CMS application</td></tr>
<tr class="a">
<td> <code>width</code>       </td>
<td align="center"> X        </td>
<td> Requested width of the image (in px)</td></tr>
<tr class="b">
<td> <code>height</code>      </td>
<td align="center"> X        </td>
<td> Requested height of the image (in px)</td></tr>
</tbody>
</table>
<p>Width and height have to be specified always together. If the asset does not comply to this with it is tried to generated a virtual rendition by resizing it. This is only possible if the width/height ratio matches and the asset is not smaller than the requested size.</p>
<p>If multiple suffix parameter sets are specified multiple assets are resolved and returned as array.</p></section><section>
<h3><a name="Data_version"></a>Data version</h3>
<p>To get the data version for all assets use an URL with this syntax:</p>

<div class="source">
<div class="source">
<pre>&lt;cms-hostname&gt;&lt;asset_root_path&gt;.wcm-io-asset-service-dataversion.json
</pre></div></div>

<p>The <code>asset_root_path</code> is by default /content/dam. If you specified specific sub paths in the <a href="configuration.html">configuration</a> you have to use one of those paths to get the matching data version. The strategy how data versions are generated can be configured there as well.</p>
<p>After the asset root path this suffix <code>.wcm-io-asset-service-dataversion.json</code> has to be added. This selector suffix can be changed in the <a href="configuration.html">configuration</a>.</p></section><section>
<h3><a name="Examples"></a>Examples</h3><section>
<h4><a name="Download_asset"></a>Download asset</h4>
<p>URL: <code>http://localhost:4503/content/dam/sample/sample.pdf.wcm-io-asset-service.json</code></p>
<p>Response:</p>

<div class="source">
<div class="source">
<pre>[
  {
    &quot;assetPath&quot;: &quot;/content/dam/sample/sample.pdf&quot;,
    &quot;url&quot;: &quot;/content/dam/sample/sample.pdf/_jcr_content/renditions/original./sample.pdf&quot;,
    &quot;fileSize&quot;: 105990,
    &quot;fileExtension&quot;: &quot;pdf&quot;,
    &quot;mimeType&quot;: &quot;application/pdf&quot;
  }
]
</pre></div></div>
</section><section>
<h4><a name="Image_Asset_with_multiple_sizes"></a>Image Asset with multiple sizes</h4>
<p>URL: <code>http://localhost:4503/content/dam/sample/myteaser.jpg.wcm-io-asset-service.json/width=273,height=154/width=546,height=307.json</code></p>
<p>Response:</p>

<div class="source">
<div class="source">
<pre>[
  {
    &quot;assetPath&quot;: &quot;/content/dam/sample/myteaser.jpg&quot;,
    &quot;url&quot;: &quot;/content/dam/sample/myteaser.jpg/_jcr_content/renditions/myteaser.jpg.image_file.273.154.file/myteaser.jpg&quot;,
    &quot;width&quot;: 273,
    &quot;height&quot;: 154,
    &quot;fileExtension&quot;: &quot;jpg&quot;,
    &quot;mimeType&quot;: &quot;image/jpeg&quot;
  },
  {
    &quot;assetPath&quot;: &quot;/content/dam/sample/myteaser.jpg&quot;,
    &quot;url&quot;: &quot;/content/dam/sample/myteaser.jpg/_jcr_content/renditions/original./myteaser.jpg&quot;,
    &quot;width&quot;: 546,
    &quot;height&quot;: 307,
    &quot;fileSize&quot;: 89479,
    &quot;fileExtension&quot;: &quot;jpg&quot;,
    &quot;mimeType&quot;: &quot;image/jpeg&quot;
  }
]
</pre></div></div>
</section><section>
<h4><a name="Get_data_version"></a>Get data version</h4>
<p>URL: <code>http://localhost:4503/content/dam.wcm-io-asset-service-dataversion.json</code></p>
<p>Response:</p>

<div class="source">
<div class="source">
<pre>{
  &quot;dataVersion&quot;:&quot;2015-08-14T16:50:19.997+02:00&quot;
}
</pre></div></div>
</section></section><section>
<h3><a name="Deprecated_REST_Interface_syntax"></a>Deprecated REST Interface syntax</h3>
<p>DAM asset service up to version 1.1.0 supported only an old-style REST interface using URL parameters instead of suffix-encoded parameters. This syntax is still supported, but is deprecated because it is not dispatcher-friendly.</p>
<p>Example URL: <code>http://localhost:4503/content/dam/sample/myteaser.jpg.wcm-io-asset-service.json?width=273&amp;height=154&amp;width=546&amp;height=307</code></p></section></section>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2014&#x2013;2021<a href="https://wcm.io">wcm.io</a>.
.      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>