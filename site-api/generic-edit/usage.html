
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2023-09-12
 Rendered using Reflow Maven Skin 1.1.0 (https://github.com/wcm-io/wcm-io-tooling/tree/develop/maven/skins/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

  <head>
    <meta charset="UTF-8" />
    <title>Site API Generic Edit usage | wcm.io</title>

    <link rel="shortcut icon" href="https://wcm.io/images/favicon.ico">
    <link rel="apple-touch-icon" href="https://wcm.io/images/favicon-152.png">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="wcm.io - Libraries and extensions for AEM applications" />
    <meta http-equiv="content-language" content="en" />

    <link href="https://wcm.io/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://wcm.io/css/docs.css" rel="stylesheet" />
    <link href="https://wcm.io/css/reflow-skin.css" rel="stylesheet" />
    <link href="https://wcm.io/css/highlightjs-style-github.min.css" rel="stylesheet" />

    <link href="https://wcm.io/css/lightbox.css" rel="stylesheet" />

    <link href="https://wcm.io/css/site.css" rel="stylesheet" />
    <link href="https://wcm.io/css/print.css" rel="stylesheet" media="print" />


  </head>

  <body class="page-usage project-io.wcm.site-api.generic-edit" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../..">wcm.io</a>
          <div class="nav-collapse collapse" id="top-nav-collapse">
            <ul class="nav pull-right">
              <li ><a href="https://github.com/wcm-io" title="GitHub project" class="externalLink">GitHub project</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Categories <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li ><a href="../../wcm/" title="WCM">WCM</a></li>
                  <li ><a href="../../dam/" title="DAM">DAM</a></li>
                  <li ><a href="../../caconfig/" title="Context-Aware Configuration">Context-Aware Configuration</a></li>
                  <li ><a href="../../handler/" title="Handler">Handler</a></li>
                  <li ><a href="../../sling/" title="Sling Extensions">Sling Extensions</a></li>
                  <li ><a href="../" title="Site API">Site API</a></li>
                  <li ><a href="../../testing/" title="Testing">Testing</a></li>
                  <li ><a href="../../samples/" title="Samples">Samples</a></li>
                  <li ><a href="../../tooling/" title="Tooling">Tooling</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li ><a href="../../contribute.html" title="Contribute">Contribute</a></li>
                  <li ><a href="../../manifest.html" title="Manifest">Manifest</a></li>
                  <li ><a href="https://github.com/wcm-io" title="Issues" class="externalLink">Issues</a></li>
                  <li ><a href="https://wcm-io.atlassian.net/wiki/" title="Wiki" class="externalLink">Wiki</a></li>
                  <li ><a href="../../mailing-lists.html" title="Mailing Lists">Mailing Lists</a></li>
                  <li ><a href="https://github.com/wcm-io" title="Fork on GitHub" class="externalLink">Fork on GitHub</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

  <div class="container">

  <!-- Masthead
  ================================================== -->

  <header>
  <div class="jumbotron subhead">
    <div class="row" id="banner">
      <div class="span12">
        <div class="pull-left">
          <a href="../../" id="bannerLeft"><h1><img src="https://wcm.io/images/favicon-16@3x.png"/> wcm.io</h1></a>
          <p class="lead">Libraries and extensions for AEM applications</p>
        </div>
        <div class="pull-right">
        </div>
      </div>
    </div>
  </div>
    <div>
      <ul class="breadcrumb">
        <li><a href="../../" title="wcm.io">wcm.io</a></li>
        <li class="divider">/</li>
        <li><a href="../" title="Site API">Site API</a></li>
        <li class="divider">/</li>
        <li><a href="./" title="Site API Generic Edit">Site API Generic Edit</a></li>
        <li class="divider">/</li>
        <li>Site API Generic Edit usage</li>
      </ul>
    </div>
  </header>

  <div class="main-body">
  <div class="row">
    <div class="span8">
      <div class="body-content">
<section> 
 <div class="page-header">
  <h2 id="Site_API_Generic_Edit_usage">Site API Generic Edit usage</h2>
 </div> 
 <section> 
  <h3 id="Creating_new_AEM_project">Creating new AEM project</h3> 
  <p>Using the <a class="externalLink" href="https://wcm.io/tooling/maven/archetypes/aem/">wcm.io Maven Archetype for AEM</a> you can create a new AEM project using the Generic Edit Mode (the Archetype only supports this together with wcm.io Handler and wcm.io Site API, although the Generic Edit feature itself can be used without those). To activate it, use these options (see <a class="externalLink" href="https://wcm.io/tooling/maven/archetypes/aem/usage.html">usage</a> for a full list of available options):</p> 
  <div class="source"> 
   <pre><code>optionWcmioHandler=y
optionWcmioSiteApi=y
optionWcmioSiteApiGenericEdit=y
</code></pre> 
  </div> 
 </section> 
 <section> 
  <h3 id="Components_with_Generic_Edit">Components with Generic Edit</h3> 
  <p>Basically, you need to prepare the following parts to make an AEM component editable via Generic Edit:</p> 
  <ul> 
   <li>Define an AEM Edit Dialog defined (as usual)</li> 
   <li>Define a Sling Model mapped to the resource type of the component. This Sling Models needs to expose all properties that should be visible in the Generic Edit View (you need that for Sling Models Exporter to JSON anyways).</li> 
   <li>Add a minimal HTL script which redirects the HTML view to Generic Edit (see below)</li> 
  </ul> 
  <p>You should not add a Generic Edit HTL script to the following components:</p> 
  <ul> 
   <li>Core Component Container</li> 
   <li>Core Component Navigation components (Navigation, Language Navigation, Breadcrumb)</li> 
  </ul> 
  <p>For further components that come with a HTML view that is usable without further CSS/JS you may want to not add the Generic Edit HTL script as well, e.g.:</p> 
  <ul> 
   <li>Core Component Title</li> 
   <li>Core Component Rich Text</li> 
   <li>Core Component Image</li> 
   <li>Core Component Separator</li> 
  </ul> 
 </section> 
 <section> 
  <h3 id="Enabling_Generic_Edit_as_primary_edit_view">Enabling Generic Edit as primary edit view</h3> 
  <p>If the Generic Edit view is the only view you want to provide to the editors, the activation requires the steps described in this section.</p> 
  <section> 
   <h4 id="Custom_Header.2FFooter_Libs">Custom Header/Footer Libs</h4> 
   <p>Include the Generic Edit CSS in your project's <code>customheaderlibs.html</code>:</p> 
   <div class="source"> 
    <pre><code class="language-html">&lt;sly
    data-sly-use.clientLib="/libs/granite/sightly/templates/clientlib.html"
    data-sly-call="${clientlib.css @ categories=['io.wcm.site-api.generic-edit']}"&gt;
/&gt;
</code></pre> 
   </div> 
   <p>And in your project's <code>customfooterlibs.html</code>:</p> 
   <div class="source"> 
    <pre><code class="language-html">&lt;sly
    data-sly-use.clientLib="/libs/granite/sightly/templates/clientlib.html"
    data-sly-call="${clientlib.js @ categories=['io.wcm.site-api.generic-edit']}"&gt;
/&gt;
</code></pre> 
   </div> 
  </section> 
  <section> 
   <h4 id="HTL_Scripts_for_Components">HTL Scripts for Components</h4> 
   <p>For each component (custom or core component), add a default HTL <code>&lt;component-name&gt;.html</code> script with the name of the component with the following content:</p> 
   <div class="source"> 
    <pre><code class="language-html">&lt;sly data-sly-include="/apps/wcm-io/site-api/generic-edit/components/component/component.html"/&gt;
</code></pre> 
   </div> 
  </section> 
 </section> 
 <section> 
  <h3 id="Enabling_Generic_Edit_as_secondary_edit_view">Enabling Generic Edit as secondary edit view</h3> 
  <p>If you want to use Generic Edit view as secondary view, and use the default HTML view of the components or an SPA Editor-based view as primary view, follow the steps described in this section.</p> 
  <p>In this case, the Generic Edit view is tied to a selector <code>.generic-edit</code> in edit mode (the name of the selector is configurable in the OSGi configuration).</p> 
  <section> 
   <h4 id="Custom_Header.2FFooter_Libs">Custom Header/Footer Libs</h4> 
   <p>Include the Generic Edit CSS in your project's <code>customheaderlibs.html</code>:</p> 
   <div class="source"> 
    <pre><code class="language-html">&lt;sly data-sly-use.detector="io.wcm.siteapi.genericedit.model.GenericEditDetector" data-sly-test.genericEdit="${detector.genericEdit}"
    data-sly-use.clientlib="/libs/granite/sightly/templates/clientlib.html"
    data-sly-call="${clientlib.css @ categories=['io.wcm.site-api.generic-edit']}"
/&gt;
&lt;sly data-sly-test="${!genericEdit}"&gt;
  &lt;!-- insert your default view header libs --&gt;
&lt;/sly&gt;
</code></pre> 
   </div> 
   <p>And in your project's <code>customfooterlibs.html</code>:</p> 
   <div class="source"> 
    <pre><code class="language-html">&lt;sly data-sly-use.detector="io.wcm.siteapi.genericedit.model.GenericEditDetector" data-sly-test.genericEdit="${detector.genericEdit}"
    data-sly-use.clientlib="/libs/granite/sightly/templates/clientlib.html"
    data-sly-call="${clientlib.js @ categories=['io.wcm.site-api.generic-edit']}"
/&gt;
&lt;sly data-sly-test="${!genericEdit}"&gt;
  &lt;!-- insert your default view footer libs --&gt;
&lt;/sly&gt;
</code></pre> 
   </div> 
   <p>If you include your default view clientlibs via Page Properties, you have to customize <code>footer.html</code> and <code>headlibs.html</code> as well, see <a class="externalLink" href="https://github.com/wcm-io/aem-guides-wknd-wcmio/tree/main/ui.apps/src/main/content/jcr_root/apps/wknd/components/page">this example</a>.</p> 
   <p>For the <code>xfpage</code> page component, provide a special script at <code>content/generic-edit.html</code>, see <a class="externalLink" href="https://github.com/wcm-io/aem-guides-wknd-wcmio/blob/main/ui.apps/src/main/content/jcr_root/apps/wknd/components/xfpage/content/generic-edit.html">this example</a>.</p> 
  </section> 
  <section> 
   <h4 id="HTL_Scripts_for_Components">HTL Scripts for Components</h4> 
   <p>For each component (custom or core component), add a new HTL script named <code>generic-edit.html</code> script with the following content:</p> 
   <div class="source"> 
    <pre><code class="language-html">&lt;sly data-sly-include="/apps/wcm-io/site-api/generic-edit/components/component/component.html"/&gt;
</code></pre> 
   </div> 
  </section> 
  <section> 
   <h4 id="Add_item_to_Page_Information_menu">Add item to Page Information menu</h4> 
   <p>To give the editors easy access to the secondary Generic Edit view, you can add a custom item to the Page Information menu.</p> 
   <p>Add a content package with an overlay page at <code>/apps/wcm/core/content/editor</code> with the content:</p> 
   <div class="source"> 
    <pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:granite="http://www.adobe.com/jcr/granite/1.0" xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0" jcr:primaryType="cq:Page"&gt;
  &lt;jcr:content jcr:primaryType="nt:unstructured"&gt;
    &lt;content jcr:primaryType="nt:unstructured"&gt;
      &lt;items jcr:primaryType="sling:OrderedFolder"&gt;
        &lt;content jcr:primaryType="sling:OrderedFolder"&gt;
          &lt;header jcr:primaryType="nt:unstructured"&gt;
            &lt;items jcr:primaryType="nt:unstructured"&gt;
              &lt;headerbar jcr:primaryType="nt:unstructured"&gt;
                &lt;items jcr:primaryType="nt:unstructured"&gt;
                  &lt;pageinfopopover jcr:primaryType="nt:unstructured"&gt;
                    &lt;items jcr:primaryType="nt:unstructured"&gt;
                      &lt;list jcr:primaryType="nt:unstructured"&gt;
                        &lt;items jcr:primaryType="nt:unstructured"&gt;
                          &lt;wcmioGenericEditView
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="granite/ui/components/coral/foundation/button"
                            sling:orderBefore="viewinadmin"
                            granite:class="pageinfo-wcmio-genericEdit"
                            text="View in Generic Edit Mode"&gt;
                            &lt;granite:rendercondition
                              jcr:primaryType="nt:unstructured"
                              sling:resourceType="granite/ui/components/coral/foundation/renderconditions/simple"
                              expression="${!granite:contains(requestPathInfo.suffix, '.generic-edit')}"/&gt;
                          &lt;/wcmioGenericEditView&gt;
                        &lt;/items&gt;
                      &lt;/list&gt;
                    &lt;/items&gt;
                  &lt;/pageinfopopover&gt;
                &lt;/items&gt;
              &lt;/headerbar&gt;
            &lt;/items&gt;
          &lt;/header&gt;
        &lt;/content&gt;        
      &lt;/items&gt;
    &lt;/content&gt;
  &lt;/jcr:content&gt;
&lt;/jcr:root&gt;
</code></pre> 
   </div> 
   <p>Add a Client Library registered to the category <code>cq.authoring.editor.sites.page.hook</code> with a piece of JS code like this:</p> 
   <div class="source"> 
    <pre><code class="language-js">(function ($, ns, channel, window, undefined) {
  "use strict";
  var contentFrame = Granite.author.ContentFrame;
  channel.on('click', '.pageinfo-wcmio-genericEdit', function() {
    var path = contentFrame.getContentPath();
    var url = '/editor.html' + path + '.generic-edit.html';
    window.open(url);
  });
}(jQuery, Granite.author, jQuery(document), this));
</code></pre> 
   </div> 
  </section> 
 </section> 
 <section> 
  <h3 id="Customize_the_Sling_Model_Property_Data_Type_Detection">Customize the Sling Model Property Data Type Detection</h3> 
  <p>By default, the Generic Edit mode should detect all types of data types from the Sling Models attached to the components correctly and display them in a sensible manner without further work. It distinguishes between different types of properties:</p> 
  <ul> 
   <li>Simple properties</li> 
   <li>Link properties</li> 
   <li>Media/Image properties</li> 
   <li>Rich Text properties</li> 
   <li>Nested Component properties</li> 
  </ul> 
  <p>It comes with default implementations to detect those properties, sometimes it apply heuristics for the detection.</p> 
  <p>You can add your own implementations of the <code>io.wcm.siteapi.genericedit.builder.ValueInspectorService</code> to add custom detection rules for special cases.</p> 
  <p>If you are using <a class="externalLink" href="https://wcm.io/handler/">wcm.io Handler</a> in your project, you should add the <a class="externalLink" href="https://wcm.io/site-api/generic-edit/handler/">Site API Generic Edit Handler Extensions</a>, it comes with default implementations of the ValueInspectorService for wcm.io Handler data types.</p> 
 </section> 
</section>
      </div>
    </div>
    <div class="span4">
      <div id="toc-sidebar">
        <div class="well">
          <ul class="nav nav-list">
            <li class="nav-header">Table of Contents</li>
    <li class="dropdown"><a href="#Site_API_Generic_Edit_usage" title="Site API Generic Edit usage">Site API Generic Edit usage <b class="caret"></b></a>
      <ul class="nav nav-list">
    <li><a href="#Creating_new_AEM_project" title="Creating new AEM project">Creating new AEM project</a>
    <li><a href="#Components_with_Generic_Edit" title="Components with Generic Edit">Components with Generic Edit</a>
    <li class="dropdown"><a href="#Enabling_Generic_Edit_as_primary_edit_view" title="Enabling Generic Edit as primary edit view">Enabling Generic Edit as primary edit view <b class="caret"></b></a>
      <ul class="nav nav-list">
    <li><a href="#Custom_Header.2FFooter_Libs" title="Custom Header/Footer Libs">Custom Header/Footer Libs</a>
    <li><a href="#HTL_Scripts_for_Components" title="HTL Scripts for Components">HTL Scripts for Components</a>
        <li class="divider"></li>
      </ul>
    </li>
    <li class="dropdown"><a href="#Enabling_Generic_Edit_as_secondary_edit_view" title="Enabling Generic Edit as secondary edit view">Enabling Generic Edit as secondary edit view <b class="caret"></b></a>
      <ul class="nav nav-list">
    <li><a href="#Custom_Header.2FFooter_Libs" title="Custom Header/Footer Libs">Custom Header/Footer Libs</a>
    <li><a href="#HTL_Scripts_for_Components" title="HTL Scripts for Components">HTL Scripts for Components</a>
    <li><a href="#Add_item_to_Page_Information_menu" title="Add item to Page Information menu">Add item to Page Information menu</a>
        <li class="divider"></li>
      </ul>
    </li>
    <li><a href="#Customize_the_Sling_Model_Property_Data_Type_Detection" title="Customize the Sling Model Property Data Type Detection">Customize the Sling Model Property Data Type Detection</a>
        <li class="divider"></li>
      </ul>
    </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  </div>

  </div>

  <!-- Footer
  ================================================== -->
  <footer class="well">
    <div class="container">
      <div class="row">
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Main</li>
            <li >
              <a href="../../" title="Home">Home</a>
            </li>
            <li >
              <a href="../../platforms.html" title="Platforms">Platforms</a>
            </li>
            <li >
              <a href="../../maven.html" title="Maven Repositories">Maven Repositories</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="GitHub project" class="externalLink">GitHub project</a>
            </li>
            <li >
              <a href="../../subprojects.html" title="Subprojects">Subprojects</a>
            </li>
            <li >
              <a href="http://www.apache.org/licenses/LICENSE-2.0.txt" title="License" class="externalLink">License</a>
            </li>
            <li >
              <a href="../../commercial-support.html" title="Commercial Support">Commercial Support</a>
            </li>
            <li >
              <a href="https://diva-e.com/en/imprint/" title="Imprint" class="externalLink">Imprint</a>
            </li>
            <li >
              <a href="../../privacy.html" title="Privacy Policy">Privacy Policy</a>
            </li>
          </ul>
        </div>
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Categories</li>
            <li >
              <a href="../../wcm/" title="WCM">WCM</a>
            </li>
            <li >
              <a href="../../dam/" title="DAM">DAM</a>
            </li>
            <li >
              <a href="../../caconfig/" title="Context-Aware Configuration">Context-Aware Configuration</a>
            </li>
            <li >
              <a href="../../handler/" title="Handler">Handler</a>
            </li>
            <li >
              <a href="../../sling/" title="Sling Extensions">Sling Extensions</a>
            </li>
            <li >
              <a href="../" title="Site API">Site API</a>
            </li>
            <li >
              <a href="../../testing/" title="Testing">Testing</a>
            </li>
            <li >
              <a href="../../samples/" title="Samples">Samples</a>
            </li>
            <li >
              <a href="../../tooling/" title="Tooling">Tooling</a>
            </li>
          </ul>
        </div>
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Contribute</li>
            <li >
              <a href="../../contribute.html" title="Contribute">Contribute</a>
            </li>
            <li >
              <a href="../../manifest.html" title="Manifest">Manifest</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="Issues" class="externalLink">Issues</a>
            </li>
            <li >
              <a href="https://wcm-io.atlassian.net/wiki/" title="Wiki" class="externalLink">Wiki</a>
            </li>
            <li >
              <a href="../../mailing-lists.html" title="Mailing Lists">Mailing Lists</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
            </li>
          </ul>
        </div>
        <div class="span3 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Maven documentation</li>
            <li >
              <a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
            </li>
            <li >
              <a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
            </li>
          </ul>
        </div>
        <div class="span3 bottom-description">
          <blockquote>wcm.io is an Open Source project which provides libraries and extensions for AEM-based applications.</blockquote>
        </div>
      </div>
    </div>
  </footer>

  <div class="container subfooter">
    <div class="row">
      <div class="span12">
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p class="copyright">Copyright &copy;2014-2023 <a href="https://wcm.io">wcm.io</a>. All Rights Reserved.</p>
        <p class="version-date"><span class="projectVersion">Version: 1.0.1-SNAPSHOT. </span><span class="publishDate">Last Published: 2023-09-12. </span></p>
      </div>
    </div>
  </div>

  <!-- JavaScript
  ================================================== -->
  <script src="https://wcm.io/js/jquery.min.js"></script>
  <script src="https://wcm.io/js/bootstrap.min.js"></script>
  <script src="https://wcm.io/js/lightbox.min.js"></script>
  <script src="https://wcm.io/js/reflow-scroll.js"></script>
  <script src="https://wcm.io/js/highlight.min.js"></script>


  <script src="https://wcm.io/js/reflow-skin.js"></script>

  </body>
</html>