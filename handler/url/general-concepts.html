
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2023-12-18
 Rendered using Reflow Maven Skin 1.1.0 (https://github.com/wcm-io/wcm-io-tooling/tree/develop/maven/skins/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

  <head>
    <meta charset="UTF-8" />
    <title>URL Handler general concepts | wcm.io</title>

    <link rel="shortcut icon" href="https://wcm.io/images/favicon.ico">
    <link rel="apple-touch-icon" href="https://wcm.io/images/favicon-152.png">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="wcm.io - Libraries and extensions for AEM applications" />
    <meta http-equiv="content-language" content="en" />

    <link href="https://wcm.io/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://wcm.io/css/docs.css" rel="stylesheet" />
    <link href="https://wcm.io/css/reflow-skin.css" rel="stylesheet" />
    <link href="https://wcm.io/css/highlightjs-style-github.min.css" rel="stylesheet" />

    <link href="https://wcm.io/css/lightbox.css" rel="stylesheet" />

    <link href="https://wcm.io/css/site.css" rel="stylesheet" />
    <link href="https://wcm.io/css/print.css" rel="stylesheet" media="print" />


  </head>

  <body class="page-general-concepts project-io.wcm.handler.url" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../..">wcm.io</a>
          <div class="nav-collapse collapse" id="top-nav-collapse">
            <ul class="nav pull-right">
              <li ><a href="https://github.com/wcm-io" title="GitHub project" class="externalLink">GitHub project</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Categories <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li ><a href="../../wcm/" title="WCM">WCM</a></li>
                  <li ><a href="../../dam/" title="DAM">DAM</a></li>
                  <li ><a href="../../caconfig/" title="Context-Aware Configuration">Context-Aware Configuration</a></li>
                  <li ><a href="../" title="Handler">Handler</a></li>
                  <li ><a href="../../sling/" title="Sling Extensions">Sling Extensions</a></li>
                  <li ><a href="../../testing/" title="Testing">Testing</a></li>
                  <li ><a href="../../samples/" title="Samples">Samples</a></li>
                  <li ><a href="../../tooling/" title="Tooling">Tooling</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li ><a href="../../contribute.html" title="Contribute">Contribute</a></li>
                  <li ><a href="../../manifest.html" title="Manifest">Manifest</a></li>
                  <li ><a href="https://github.com/wcm-io" title="Issues" class="externalLink">Issues</a></li>
                  <li ><a href="https://wcm-io.atlassian.net/wiki/" title="Wiki" class="externalLink">Wiki</a></li>
                  <li ><a href="../../mailing-lists.html" title="Mailing Lists">Mailing Lists</a></li>
                  <li ><a href="https://github.com/wcm-io" title="Fork on GitHub" class="externalLink">Fork on GitHub</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

  <div class="container">

  <!-- Masthead
  ================================================== -->

  <header>
  <div class="jumbotron subhead">
    <div class="row" id="banner">
      <div class="span12">
        <div class="pull-left">
          <a href="../../" id="bannerLeft"><h1><img src="https://wcm.io/images/favicon-16@3x.png"/> wcm.io</h1></a>
          <p class="lead">Libraries and extensions for AEM applications</p>
        </div>
        <div class="pull-right">
        </div>
      </div>
    </div>
  </div>
    <div>
      <ul class="breadcrumb">
        <li><a href="../../" title="wcm.io">wcm.io</a></li>
        <li class="divider">/</li>
        <li><a href="../" title="Handler">Handler</a></li>
        <li class="divider">/</li>
        <li><a href="./" title="URL Handler">URL Handler</a></li>
        <li class="divider">/</li>
        <li>URL Handler general concepts</li>
      </ul>
    </div>
  </header>

  <div class="main-body">
  <div class="row">
    <div class="span8">
      <div class="body-content">
<section> 
 <div class="page-header">
  <h2 id="URL_Handler_general_concepts">URL Handler general concepts</h2>
 </div> 
 <p>The wcm.io URL Handler is responsible for building and externalizing all types or URLs within an AEM project.</p> 
 <p>This page describes these basic concepts, the <a href="usage.html">usage</a> page shows examples how to use them.</p> 
 <section> 
  <h3 id="Introduction">Introduction</h3> 
  <p>In most cases you do not use the URL handler directly to build URLs, but you use one of the higher-level handlers to do the job:</p> 
  <ul> 
   <li><a href="../link/">Link Handler</a>: Used to build URLs and markup for “human-clickable” links to content pages, external links or DAM assets that results in a HTML anchor tag and may need more processing e.g. for SEO, web tracking and link target validation</li> 
   <li><a href="../media/">Media Handler</a>: Used to build URLs and markup for displaying images or other media content inside a page</li> 
   <li><a href="../richtext/">RichText Handler</a>: Used to format a HTML fragment that may contain inline links oder media references</li> 
  </ul> 
  <p>These handlers make use of the URL handler and its configuration internally. The link handler supports most or URL handler options to modify the generated URL by added selectors, extensions, suffix, parameters and fragment as well.</p> 
  <p>Example use cases where you should use the URL handler to build an URL directly:</p> 
  <ul> 
   <li>URLs to static resources from a client library</li> 
   <li>URLs to Sling resources with selectors, extensions and suffixes</li> 
   <li>URLs used for AJAX requests in JavaScript</li> 
  </ul> 
  <p>The URL handler itself is also integrated into the AEM <a class="externalLink" href="https://helpx.adobe.com/experience-manager/using/creating-link-rewrite.html">Link Rewriter</a> (Sling Rewriter), so you do not need to explicitly externalize URLs by using the Java API when URLs are inserted in render scripts (e.g. HTL template).</p> 
 </section> 
 <section> 
  <h3 id="URL_building">URL building</h3> 
  <p>Building Sling URLs within an AEM application seems a simple task, yet it is non-trivial if all aspects are taken into account:</p> 
  <ul> 
   <li>Proper syntax and escaping</li> 
   <li>Optional context path of AEM web application</li> 
   <li>Optional URL shortening</li> 
   <li>Namespace mangling in URLs</li> 
   <li>Handling of complex Sling Suffix strings without clashes in the file system of AEM dispatcher cache</li> 
   <li>Switch protocols from HTTP to HTTPs and vice versa</li> 
   <li>Externalization with public host name</li> 
  </ul> 
  <p>AEM supports only some of these features by it's <a class="externalLink" href="https://helpx.adobe.com/experience-manager/6-4/sites/developing/using/externalizer.html">Externalizer</a> service and the <a class="externalLink" href="https://helpx.adobe.com/experience-manager/using/creating-link-rewrite.html">Link Rewriter</a> (Sling Rewriter), but it lacks proper multi-tenancy support and a good API.</p> 
  <p>The URL Handler supports all these features and provides a fluent Java API.</p> 
 </section> 
 <section> 
  <h3 id="Site_root_detection">Site root detection</h3> 
  <p>AEM has no built-in concept for “what is a site” and “where is the site root”. This makes it difficult because a lot of components need to know what is the site root, e.g. navigation components, breadcrumb components, or a Granite UI component to pick a path of the current site.</p> 
  <p>The <a class="externalLink" href="https://github.com/adobe/aem-core-wcm-components">AEM Core WCM Components</a> use content policies to define the site root for it's various components, but this does not work well because it has to be redefined for every component and template context. And if the same editable templates is defined for multiple sites with different root paths the editable template definition itself might need to be duplicated.</p> 
  <p>Therefore the URL handler introduces a way to detect the Site Root that is used by all wcm.io Handlers and can also be used easily by the project's AEM components.</p> 
  <p>By default the site root is detected by taking the root of the “inner-most” Sling Context-Aware Configuration context path as site root path. But you can easily apply your own concept how the root path is detected, e.g. by assuming a fixed absolute parent level. The point is: once this is configured in a central place, it's respected by all components and wcm.io Handlers in a consistent way.</p> 
  <p>The URL handler also provides a predefined <code>SiteRoot</code> model which can be directly used in HTL templates or injected in other Sling Models to get the current site root.</p> 
  <p>The site root detection also works in special conditions e.g. when the site is part of an AEM launch or an older version of the page is previewed in the version history mode.</p> 
 </section> 
 <section> 
  <h3 id="URL_externalization">URL externalization</h3> 
  <p>The URL handler can externalize URLs that point to AEM content pages or assets with the proper domain name.</p> 
  <p>Unlike the AEM <a class="externalLink" href="https://helpx.adobe.com/experience-manager/6-4/sites/developing/using/externalizer.html">Externalizer</a> service the configuration of these domains is done via Sling Context-Aware configuration and thus fully supporting a multi-tenancy context.</p> 
  <p>Alternatively, the domain names which are configured as part of the Sling Mapping configuration can be used for externalization. This has to be enabled explicitly in the UrlHandlerConfig.</p> 
 </section> 
 <section> 
  <h3 id="URL_modes">URL modes</h3> 
  <p>Whenever an URL is built it's possible to process it using an “URL mode”. In the default mode URLs are not externalized if not required.</p> 
  <p>Built-in URL modes:</p> 
  <ul> 
   <li><b>DEFAULT</b>: Default mode - Does generate a full externalized URL only if both siteUrl and siteUrlSecure parameter are set in context-specific configuration. If not set, only URLs without hostname are generated.</li> 
   <li><b>NO_HOSTNAME</b>: Does generate a externalized URL without any protocol and hostname, independent of any setting in context-specific configuration.</li> 
   <li><b>FULL_URL</b>: Enforce the generation of a full URL with protocol and hostname.</li> 
   <li><b>FULL_URL_FORCENONSECURE</b>: Enforce the generation of a full URL with protocol and hostname and non-secure mode.</li> 
   <li><b>FULL_URL_FORCESECURE</b>: Enforce the generation of a full URL with protocol and hostname and secure mode.</li> 
   <li><b>FULL_URL_PROTOCOLRELATIVE</b>: Enforce the generation of a full URL with hostname and “//” as protocol (protocol-relative mode).</li> 
   <li><b>FULL_URL_PUBLISH</b>: Enforce the generation of a full URL with protocol and hostname.</li> 
   <li><b>FULL_URL_PUBLISH_FORCENONSECURE</b>: Enforce the generation of a full URL with protocol and hostname and non-secure mode.</li> 
   <li><b>FULL_URL_PUBLISH_FORCESECURE</b>: Enforce the generation of a full URL with protocol and hostname and secure mode.</li> 
   <li><b>FULL_URL_PUBLISH_PROTOCOLRELATIVE</b>: Enforce the generation of a full URL with hostname and “//” as protocol (protocol-relative mode).</li> 
  </ul> 
 </section> 
 <section> 
  <h3 id="Highly_customizable">Highly customizable</h3> 
  <p>The URL Handler is highly customizable to adapt it to the needs of your project:</p> 
  <ul> 
   <li>Customize the site root detection</li> 
   <li>Customize the detection of secure mode</li> 
   <li>Define default URL mode and add custom URL mode implementations</li> 
   <li>Make use of the integrator template feature</li> 
  </ul> 
 </section> 
</section>
      </div>
    </div>
    <div class="span4">
      <div id="toc-sidebar">
        <div class="well">
          <ul class="nav nav-list">
            <li class="nav-header">Table of Contents</li>
    <li class="dropdown"><a href="#URL_Handler_general_concepts" title="URL Handler general concepts">URL Handler general concepts <b class="caret"></b></a>
      <ul class="nav nav-list">
    <li><a href="#Introduction" title="Introduction">Introduction</a>
    <li><a href="#URL_building" title="URL building">URL building</a>
    <li><a href="#Site_root_detection" title="Site root detection">Site root detection</a>
    <li><a href="#URL_externalization" title="URL externalization">URL externalization</a>
    <li><a href="#URL_modes" title="URL modes">URL modes</a>
    <li><a href="#Highly_customizable" title="Highly customizable">Highly customizable</a>
        <li class="divider"></li>
      </ul>
    </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  </div>

  </div>

  <!-- Footer
  ================================================== -->
  <footer class="well">
    <div class="container">
      <div class="row">
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Main</li>
            <li >
              <a href="../../" title="Home">Home</a>
            </li>
            <li >
              <a href="../../platforms.html" title="Platforms">Platforms</a>
            </li>
            <li >
              <a href="../../maven.html" title="Maven Repositories">Maven Repositories</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="GitHub project" class="externalLink">GitHub project</a>
            </li>
            <li >
              <a href="../../subprojects.html" title="Subprojects">Subprojects</a>
            </li>
            <li >
              <a href="http://www.apache.org/licenses/LICENSE-2.0.txt" title="License" class="externalLink">License</a>
            </li>
            <li >
              <a href="../../commercial-support.html" title="Commercial Support">Commercial Support</a>
            </li>
            <li >
              <a href="https://diva-e.com/en/imprint/" title="Imprint" class="externalLink">Imprint</a>
            </li>
            <li >
              <a href="../../privacy.html" title="Privacy Policy">Privacy Policy</a>
            </li>
          </ul>
        </div>
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Categories</li>
            <li >
              <a href="../../wcm/" title="WCM">WCM</a>
            </li>
            <li >
              <a href="../../dam/" title="DAM">DAM</a>
            </li>
            <li >
              <a href="../../caconfig/" title="Context-Aware Configuration">Context-Aware Configuration</a>
            </li>
            <li >
              <a href="../" title="Handler">Handler</a>
            </li>
            <li >
              <a href="../../sling/" title="Sling Extensions">Sling Extensions</a>
            </li>
            <li >
              <a href="../../testing/" title="Testing">Testing</a>
            </li>
            <li >
              <a href="../../samples/" title="Samples">Samples</a>
            </li>
            <li >
              <a href="../../tooling/" title="Tooling">Tooling</a>
            </li>
          </ul>
        </div>
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Contribute</li>
            <li >
              <a href="../../contribute.html" title="Contribute">Contribute</a>
            </li>
            <li >
              <a href="../../manifest.html" title="Manifest">Manifest</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="Issues" class="externalLink">Issues</a>
            </li>
            <li >
              <a href="https://wcm-io.atlassian.net/wiki/" title="Wiki" class="externalLink">Wiki</a>
            </li>
            <li >
              <a href="../../mailing-lists.html" title="Mailing Lists">Mailing Lists</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
            </li>
          </ul>
        </div>
        <div class="span3 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Maven documentation</li>
            <li >
              <a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
            </li>
            <li >
              <a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
            </li>
          </ul>
        </div>
        <div class="span3 bottom-description">
          <blockquote>wcm.io is an Open Source project which provides libraries and extensions for AEM-based applications.</blockquote>
        </div>
      </div>
    </div>
  </footer>

  <div class="container subfooter">
    <div class="row">
      <div class="span12">
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p class="copyright">Copyright &copy;2014-2023 <a href="https://wcm.io">wcm.io</a>. All Rights Reserved.</p>
        <p class="version-date"><span class="projectVersion">Version: 1.10.3-SNAPSHOT. </span><span class="publishDate">Last Published: 2023-12-18. </span></p>
      </div>
    </div>
  </div>

  <!-- JavaScript
  ================================================== -->
  <script src="https://wcm.io/js/jquery.min.js"></script>
  <script src="https://wcm.io/js/bootstrap.min.js"></script>
  <script src="https://wcm.io/js/lightbox.min.js"></script>
  <script src="https://wcm.io/js/reflow-scroll.js"></script>
  <script src="https://wcm.io/js/highlight.min.js"></script>


  <script src="https://wcm.io/js/reflow-skin.js"></script>

  </body>
</html>