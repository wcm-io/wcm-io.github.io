
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2022-01-11
 Rendered using Reflow Maven Skin 1.1.0 (https://github.com/wcm-io/wcm-io-tooling/tree/develop/maven/skins/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

  <head>
    <meta charset="UTF-8" />
    <title>Configuration Editor usage | wcm.io</title>

    <link rel="shortcut icon" href="https://wcm.io/images/favicon.ico">
    <link rel="apple-touch-icon" href="https://wcm.io/images/favicon-152.png">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="wcm.io - Libraries and extensions for AEM applications" />
    <meta http-equiv="content-language" content="en" />

    <link href="https://wcm.io/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://wcm.io/css/docs.css" rel="stylesheet" />
    <link href="https://wcm.io/css/reflow-skin.css" rel="stylesheet" />
    <link href="https://wcm.io/css/highlightjs-style-github.min.css" rel="stylesheet" />

    <link href="https://wcm.io/css/lightbox.css" rel="stylesheet" />

    <link href="https://wcm.io/css/site.css" rel="stylesheet" />
    <link href="https://wcm.io/css/print.css" rel="stylesheet" media="print" />


  </head>

  <body class="page-usage project-io.wcm.caconfig.editor.root" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../..">wcm.io</a>
          <div class="nav-collapse collapse" id="top-nav-collapse">
            <ul class="nav pull-right">
              <li ><a href="https://github.com/wcm-io" title="GitHub project" class="externalLink">GitHub project</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Categories <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li ><a href="../../wcm/" title="WCM">WCM</a></li>
                  <li ><a href="../../dam/" title="DAM">DAM</a></li>
                  <li ><a href="../" title="Context-Aware Configuration">Context-Aware Configuration</a></li>
                  <li ><a href="../../handler/" title="Handler">Handler</a></li>
                  <li ><a href="../../sling/" title="Sling Extensions">Sling Extensions</a></li>
                  <li ><a href="../../testing/" title="Testing">Testing</a></li>
                  <li ><a href="../../samples/" title="Samples">Samples</a></li>
                  <li ><a href="../../tooling/" title="Tooling">Tooling</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li ><a href="../../contribute.html" title="Contribute">Contribute</a></li>
                  <li ><a href="../../manifest.html" title="Manifest">Manifest</a></li>
                  <li ><a href="https://wcm-io.atlassian.net" title="Issues" class="externalLink">Issues</a></li>
                  <li ><a href="https://wcm-io.atlassian.net/wiki/" title="Wiki" class="externalLink">Wiki</a></li>
                  <li ><a href="../../mailing-lists.html" title="Mailing Lists">Mailing Lists</a></li>
                  <li ><a href="https://github.com/wcm-io" title="Fork on GitHub" class="externalLink">Fork on GitHub</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

  <div class="container">

  <!-- Masthead
  ================================================== -->

  <header>
  <div class="jumbotron subhead">
    <div class="row" id="banner">
      <div class="span12">
        <div class="pull-left">
          <a href="../../" id="bannerLeft"><h1><img src="https://wcm.io/images/favicon-16@3x.png"/> wcm.io</h1></a>
          <p class="lead">Libraries and extensions for AEM applications</p>
        </div>
        <div class="pull-right">
        </div>
      </div>
    </div>
  </div>
    <div>
      <ul class="breadcrumb">
        <li><a href="../../" title="wcm.io">wcm.io</a></li>
        <li class="divider">/</li>
        <li><a href="../" title="Context-Aware Configuration">Context-Aware Configuration</a></li>
        <li class="divider">/</li>
        <li><a href="./" title="Context-Aware Configuration Editor">Context-Aware Configuration Editor</a></li>
        <li class="divider">/</li>
        <li>Configuration Editor usage</li>
      </ul>
    </div>
  </header>

  <div class="main-body">
  <div class="row">
    <div class="span8">
      <div class="body-content">
<section> 
 <div class="page-header">
  <h2 id="Configuration_Editor_usage">Configuration Editor usage</h2>
 </div> 
 <section> 
  <h3 id="Basic_concepts">Basic concepts</h3> 
  <p>The Configuration Editor is a template which is used inside the ‘/content’ tree. It allows to edit configurations for the inner-most context that is detected within the context tree (e.g. by defining <code>sling:configRef</code> properties). Where the configuration itself is stored depends on your system settings, by default it's stored in <code>/conf</code>.</p> 
  <p>You cannot define the contexts via the configuration editor, you have to set the <code>sling:configRef</code> manually or within the page properties of your content templates, or by defining custom context path strategies. But once your contexts are defined you can create a config editor page within each context and edit the configuration parameters.</p> 
  <p>The configuration editor supports only editing configuration for which configuration metadata is present. This is normally done by deploying configuration annotation classes with your applications.</p> 
  <p>See <a class="externalLink" href="https://sling.apache.org/documentation/bundles/context-aware-configuration/context-aware-configuration.html">Apache Sling Context-Aware Configuration documentation</a> for more details.</p> 
 </section> 
 <section> 
  <h3 id="Installation">Installation</h3> 
  <p>In most cases you will deploy the configuration editor bundle <code>io.wcm.caconfig.editor</code> together with your application. In this case you should define your own template definition for it which controls where editor config pages can created (see next section).</p> 
  <p>Alternatively you can deploy it using an AEM package which contains the config editor bundle together with a template definition which allows all paths below <code>/content</code>.</p> 
  <table border="0" class="bodyTable table table-striped table-hover"> 
   <thead></thead> 
   <tbody> 
    <tr class="a"> 
     <td align="left"><a class="externalLink" href="https://maven-badges.herokuapp.com/maven-central/io.wcm/io.wcm.caconfig.editor">wcm.io Context-Aware Configuration Editor Bundle (JAR)</a></td> 
     <td><a class="externalLink" href="https://maven-badges.herokuapp.com/maven-central/io.wcm/io.wcm.caconfig.editor"><img src="https://maven-badges.herokuapp.com/maven-central/io.wcm/io.wcm.caconfig.editor/badge.svg" alt="Maven Central"></a></td> 
    </tr> 
    <tr class="b"> 
     <td align="left"><a class="externalLink" href="https://maven-badges.herokuapp.com/maven-central/io.wcm/io.wcm.caconfig.editor.package">wcm.io Context-Aware Configuration Editor AEM Package with Template Definition (ZIP)</a></td> 
     <td><a class="externalLink" href="https://maven-badges.herokuapp.com/maven-central/io.wcm/io.wcm.caconfig.editor.package"><img src="https://maven-badges.herokuapp.com/maven-central/io.wcm/io.wcm.caconfig.editor.package/badge.svg" alt="Maven Central"></a></td> 
    </tr> 
   </tbody> 
  </table> 
  <p>When you are using AEM 6.1 or 6.2 you have to additionally deploy the Apache Sling Context-Aware Configuration bundles (API, SPI, Impl) to AEM. In AEM 6.3 you have to update the Apache Sling Context-Aware Configuration SPI and Impl version to the latest version if you want to use Editor version 1.1 and upwards. See <a class="externalLink" href="https://wcm.io/caconfig/deploy-configure-caconfig-in-aem.html">Deploy and configure Context-Aware Configuration in AEM</a> for details.</p> 
  <p>In most cases the default persistence implementation provided by Apache Sling or AEM 6.3/6.4 is not enough for the needs of AEM applications. <a class="externalLink" href="https://wcm.io/caconfig/extensions/">wcm.io Context-Aware Configuration Extensions</a> provide additional implementations and features.</p> 
 </section> 
 <section> 
  <h3 id="Defining_the_editor_template">Defining the editor template</h3> 
  <p>The editor application contains an AEM template definition, but it is deactivated by default. Each application has to define it's own editor template with a fitting <code>allowedPaths</code> definition and title depending on the needs of the application.</p> 
  <p>Only the template has to be defined, the page component resource type can be referenced. Example:</p> 
  <div class="source"> 
   <pre><code class="language-json">{
  "jcr:primaryType": "cq:Template",
  "jcr:title": "Configuration Editor",

  "allowedPaths": "^/content(/.*)?$",

  "jcr:content": {
    "jcr:primaryType": "cq:PageContent",
    "sling:resourceType": "/apps/wcm-io/caconfig/editor/components/page/editor"
  }
}
</code></pre> 
  </div> 
 </section> 
 <section> 
  <h3 id="Editor_GUI">Editor GUI</h3> 
  <p><img src="images/configuration-overview.png" alt="Configuration Overview"></p> 
  <p>When opening the Configuration Editor an overview of all configurations is displayed for which some configuration data is present. By using the “Add” button you can enter new configuration data for other configurations where no data exists yet.</p> 
  <p><img src="images/configuration-editor-singleton.png" alt="Singleton Configuration"></p> 
  <p>For a singleton configuration all configuration parameters are displayed and can be changed. With the “Save” button the changes are persisted, the “Delete” button removes the whole configuration.</p> 
  <p><img src="images/configuration-editor-list.png" alt="ConfigurationL Collection"></p> 
  <p>For a configuration collection all existing collection items are displayed, and new ones can be added after entering a name. Single items or the whole configuration collection can be removed.</p> 
  <p>The editor is based on AngularJS and CoralUI.</p> 
 </section> 
 <section> 
  <h3 id="Publish_configurations">Publish configurations</h3> 
  <p>By default, Context-Aware configurations are stored below <code>/conf</code> and can thus not published by editors using the AEM Author GUI. The Editor provides an “publish this page” button, which published the editor page itself.</p> 
  <p>It is recommended to also deploy the <a class="externalLink" href="https://wcm.io/caconfig/extensions/">wcm.io Context-Aware Configuration Extensions</a> and activate the <a class="externalLink" href="https://wcm.io/caconfig/extensions/persistence-strategies.html">AEM Page persistence strategy</a>. Then the <a class="externalLink" href="https://wcm.io/caconfig/extensions/reference-provider.html">reference provider</a> also included in the extensions bundles detects changed and unpublished configuration pages below <code>/conf</code> when publishing the editor page, and allows to publish the configurations as well.</p> 
 </section> 
 <section> 
  <h3 id="Using_custom_edit_widgets">Using custom edit widgets</h3> 
  <p>For each data type (string, number, boolean) the fitting edit widget is chosen automatically. Alternatively you can define custom widgets via extra properties on the <code>@Property</code> annotation.</p> 
  <section> 
   <h4 id="pathbrowser">pathbrowser</h4> 
   <p>Define a path browser widget for a string parameter with fixed path:</p> 
   <div class="source"> 
    <pre><code class="language-java">@Property(label = "DAM Path", description = "Browse DAM assets.", property = {
    "widgetType=pathbrowser",
    "pathbrowserRootPath=/content/dam"
})
String damPath();
</code></pre> 
   </div> 
   <p>Define a path browser widget for a string parameter with the current configuration context path as root path:</p> 
   <div class="source"> 
    <pre><code class="language-java">@Property(label = "Context Path", description = "Browse pages in the current site.", property = {
    "widgetType=pathbrowser",
    "pathbrowserRootPathContext=true"
})
String contextPath();
</code></pre> 
   </div> 
  </section> 
  <section> 
   <h4 id="dropdown">dropdown</h4> 
   <p>Define a dropdown list of options to choose from. The description is displayed to the user, the value of the chosen option is stored in the configuration.</p> 
   <div class="source"> 
    <pre><code class="language-java">@Property(label = "Dropdown Param", description = "Parameter with dropdown list.", property = {
    "widgetType=dropdown",
    "dropdownOptions=["
        + "{'value':'option1','description':'First option'},"
        + "{'value':'option2','description':'Second option'},"
        + "{'value':'option3','description':'Third option'}"
        + "]"
})
String dropdownParam();
</code></pre> 
   </div> 
   <p>If you annotate an array parameter multiple options can be selected.</p> 
   <p>Alternatively, it is possible to provide a dynamic list of dropdown options by pointing to an OSGi service implementation of the <a href="bundle/apidocs/io/wcm/caconfig/editor/DropdownOptionsProvider.html">DropdownOptionsProvider</a> interface which has a property DropdownOptionsProvider.PROPERTY_SELECTOR set to a name matching the name set in the property configuration:</p> 
   <div class="source"> 
    <pre><code class="language-java">@Property(label = "Dropdown Dynamic Param", description = "Parameter with dynamic dropdown list.", property = {
    "widgetType=dropdown",
    "dropdownOptionsProvider=myproject.provider1"
})
String dropdownDynamicParam();
</code></pre> 
   </div> 
  </section> 
  <section> 
   <h4 id="textarea">textarea</h4> 
   <p>Allows to enter multiple lines of text for a string parameter.</p> 
   <div class="source"> 
    <pre><code class="language-java">@Property(label = "String Text Area", description = "Enter multiple lines of text.", property = {
    "widgetType=textarea"
})
String stringTextArea();
</code></pre> 
   </div> 
  </section> 
 </section> 
 <section> 
  <h3 id="Filter_configurations">Filter configurations</h3> 
  <p>On a system that hosts multiple tenants or websites it may be desirable to offer only a subset of context-aware configurations that are present in the system. This is possible by adding a <a class="externalLink" href="https://wcm.io/sling/commons/context-aware-services.html">Context-Aware Service</a> that implements the interface <a href="bundle/apidocs/io/wcm/caconfig/editor/ConfigurationEditorFilter.html">ConfigurationEditorFilter</a>.</p> 
  <p>Example:</p> 
  <div class="source"> 
   <pre><code class="language-java">@Component(service = ConfigurationEditorFilter.class)
public class ConfigurationEditorFilterImpl implements ConfigurationEditorFilter {

  @Override
  public boolean allowAdd(@NotNull String configName) {
    return !StringUtils.startsWith(configName, "unwantedConfigName");
  }

}
</code></pre> 
  </div> 
  <p>The control which context-aware configurations are available on which content subtree in the system set the appropriate service properties or bundle header names as described in <a class="externalLink" href="https://wcm.io/sling/commons/context-aware-services.html">Context-Aware Services</a>.</p> 
 </section> 
 <section> 
  <h3 id="Disable_Editor_on_Publish">Disable Editor on Publish</h3> 
  <p>You should disable the configuration editor on publish by applying an OSGi configuration like this:</p> 
  <div class="source"> 
   <pre><code>[configurations runModes=publish]

  # Disable Configuration Editor on publish
  io.wcm.caconfig.editor.impl.EditorConfig
    enabled=B"false"
</code></pre> 
  </div> 
 </section> 
</section>
      </div>
    </div>
    <div class="span4">
      <div id="toc-sidebar">
        <div class="well">
          <ul class="nav nav-list">
            <li class="nav-header">Table of Contents</li>
    <li class="dropdown"><a href="#Configuration_Editor_usage" title="Configuration Editor usage">Configuration Editor usage <b class="caret"></b></a>
      <ul class="nav nav-list">
    <li><a href="#Basic_concepts" title="Basic concepts">Basic concepts</a>
    <li><a href="#Installation" title="Installation">Installation</a>
    <li><a href="#Defining_the_editor_template" title="Defining the editor template">Defining the editor template</a>
    <li><a href="#Editor_GUI" title="Editor GUI">Editor GUI</a>
    <li><a href="#Publish_configurations" title="Publish configurations">Publish configurations</a>
    <li class="dropdown"><a href="#Using_custom_edit_widgets" title="Using custom edit widgets">Using custom edit widgets <b class="caret"></b></a>
      <ul class="nav nav-list">
    <li><a href="#pathbrowser" title="pathbrowser">pathbrowser</a>
    <li><a href="#dropdown" title="dropdown">dropdown</a>
    <li><a href="#textarea" title="textarea">textarea</a>
        <li class="divider"></li>
      </ul>
    </li>
    <li><a href="#Filter_configurations" title="Filter configurations">Filter configurations</a>
    <li><a href="#Disable_Editor_on_Publish" title="Disable Editor on Publish">Disable Editor on Publish</a>
        <li class="divider"></li>
      </ul>
    </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  </div>

  </div>

  <!-- Footer
  ================================================== -->
  <footer class="well">
    <div class="container">
      <div class="row">
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Main</li>
            <li >
              <a href="../../" title="Home">Home</a>
            </li>
            <li >
              <a href="../../platforms.html" title="Platforms">Platforms</a>
            </li>
            <li >
              <a href="../../maven.html" title="Maven Repositories">Maven Repositories</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="GitHub project" class="externalLink">GitHub project</a>
            </li>
            <li >
              <a href="../../subprojects.html" title="Subprojects">Subprojects</a>
            </li>
            <li >
              <a href="http://www.apache.org/licenses/LICENSE-2.0.txt" title="License" class="externalLink">License</a>
            </li>
            <li >
              <a href="../../commercial-support.html" title="Commercial Support">Commercial Support</a>
            </li>
            <li >
              <a href="https://diva-e.com/en/imprint/" title="Imprint" class="externalLink">Imprint</a>
            </li>
            <li >
              <a href="../../privacy.html" title="Privacy Policy">Privacy Policy</a>
            </li>
          </ul>
        </div>
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Categories</li>
            <li >
              <a href="../../wcm/" title="WCM">WCM</a>
            </li>
            <li >
              <a href="../../dam/" title="DAM">DAM</a>
            </li>
            <li >
              <a href="../" title="Context-Aware Configuration">Context-Aware Configuration</a>
            </li>
            <li >
              <a href="../../handler/" title="Handler">Handler</a>
            </li>
            <li >
              <a href="../../sling/" title="Sling Extensions">Sling Extensions</a>
            </li>
            <li >
              <a href="../../testing/" title="Testing">Testing</a>
            </li>
            <li >
              <a href="../../samples/" title="Samples">Samples</a>
            </li>
            <li >
              <a href="../../tooling/" title="Tooling">Tooling</a>
            </li>
          </ul>
        </div>
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Contribute</li>
            <li >
              <a href="../../contribute.html" title="Contribute">Contribute</a>
            </li>
            <li >
              <a href="../../manifest.html" title="Manifest">Manifest</a>
            </li>
            <li >
              <a href="https://wcm-io.atlassian.net" title="Issues" class="externalLink">Issues</a>
            </li>
            <li >
              <a href="https://wcm-io.atlassian.net/wiki/" title="Wiki" class="externalLink">Wiki</a>
            </li>
            <li >
              <a href="../../mailing-lists.html" title="Mailing Lists">Mailing Lists</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
            </li>
          </ul>
        </div>
        <div class="span3 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Maven documentation</li>
            <li >
              <a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
            </li>
            <li >
              <a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
            </li>
          </ul>
        </div>
        <div class="span3 bottom-description">
          <blockquote>wcm.io is an Open Source project which provides libraries and extensions for AEM-based applications.</blockquote>
        </div>
      </div>
    </div>
  </footer>

  <div class="container subfooter">
    <div class="row">
      <div class="span12">
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p class="copyright">Copyright &copy;2014-2022 <a href="https://wcm.io">wcm.io</a>. All Rights Reserved.</p>
        <p class="version-date"><span class="projectVersion">Version: 1.9.0-SNAPSHOT. </span><span class="publishDate">Last Published: 2022-01-11. </span></p>
      </div>
    </div>
  </div>

  <!-- JavaScript
  ================================================== -->
  <script src="https://wcm.io/js/jquery.min.js"></script>
  <script src="https://wcm.io/js/bootstrap.min.js"></script>
  <script src="https://wcm.io/js/lightbox.min.js"></script>
  <script src="https://wcm.io/js/reflow-scroll.js"></script>
  <script src="https://wcm.io/js/highlight.min.js"></script>


  <script src="https://wcm.io/js/reflow-skin.js"></script>

  </body>
</html>