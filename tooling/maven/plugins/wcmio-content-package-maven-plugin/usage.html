
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2021-12-22
 Rendered using Reflow Maven Skin 1.1.0 (https://github.com/wcm-io/wcm-io-tooling/tree/develop/maven/skins/reflow-maven-skin)
-->
<html  xml:lang="en" lang="en">

  <head>
    <meta charset="UTF-8" />
    <title>Content Package Maven Plugin Usage | Content Package Maven Plugin</title>

    <link rel="shortcut icon" href="https://wcm.io/images/favicon.ico">
    <link rel="apple-touch-icon" href="https://wcm.io/images/favicon-152.png">

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="wcm.io - Libraries and extensions for AEM applications" />
    <meta http-equiv="content-language" content="en" />

    <link href="https://wcm.io/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://wcm.io/css/docs.css" rel="stylesheet" />
    <link href="https://wcm.io/css/reflow-skin.css" rel="stylesheet" />
    <link href="https://wcm.io/css/highlightjs-style-github.min.css" rel="stylesheet" />

    <link href="https://wcm.io/css/lightbox.css" rel="stylesheet" />

    <link href="https://wcm.io/css/site.css" rel="stylesheet" />
    <link href="https://wcm.io/css/print.css" rel="stylesheet" media="print" />


  </head>

  <body class="page-usage project-wcmio-content-package-maven-plugin" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="../../../..">wcm.io</a>
          <div class="nav-collapse collapse" id="top-nav-collapse">
            <ul class="nav pull-right">
              <li ><a href="https://github.com/wcm-io" title="GitHub project" class="externalLink">GitHub project</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Categories <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li ><a href="../../../../wcm/" title="WCM">WCM</a></li>
                  <li ><a href="../../../../dam/" title="DAM">DAM</a></li>
                  <li ><a href="../../../../caconfig/" title="Context-Aware Configuration">Context-Aware Configuration</a></li>
                  <li ><a href="../../../../handler/" title="Handler">Handler</a></li>
                  <li ><a href="../../../../sling/" title="Sling">Sling</a></li>
                  <li ><a href="../../../../testing/" title="Testing">Testing</a></li>
                  <li ><a href="../../../../samples/" title="Samples">Samples</a></li>
                  <li ><a href="../../../" title="Tooling">Tooling</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Contribute <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li ><a href="../../../../contribute.html" title="Contribute">Contribute</a></li>
                  <li ><a href="../../../../manifest.html" title="Manifest">Manifest</a></li>
                  <li ><a href="https://wcm-io.atlassian.net" title="Issues" class="externalLink">Issues</a></li>
                  <li ><a href="https://wcm-io.atlassian.net/wiki/" title="Wiki" class="externalLink">Wiki</a></li>
                  <li ><a href="../../../../mailing-lists.html" title="Mailing Lists">Mailing Lists</a></li>
                  <li ><a href="https://github.com/wcm-io" title="Fork on GitHub" class="externalLink">Fork on GitHub</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

  <div class="container">

  <!-- Masthead
  ================================================== -->

  <header>
  <div class="jumbotron subhead">
    <div class="row" id="banner">
      <div class="span12">
        <div class="pull-left">
          <a href="../../../../" id="bannerLeft"><h1><img src="https://wcm.io/images/favicon-16@3x.png"/> wcm.io</h1></a>
          <p class="lead">Libraries and extensions for AEM applications</p>
        </div>
        <div class="pull-right">
        </div>
      </div>
    </div>
  </div>
    <div>
      <ul class="breadcrumb">
        <li><a href="../../../../" title="wcm.io">wcm.io</a></li>
        <li class="divider">/</li>
        <li><a href="../../../index.html" title="Tooling">Tooling</a></li>
        <li class="divider">/</li>
        <li><a href="../../index.html" title="Maven Tooling">Maven Tooling</a></li>
        <li class="divider">/</li>
        <li><a href="index.html" title="Content Package Maven Plugin">Content Package Maven Plugin</a></li>
        <li class="divider">/</li>
        <li>Content Package Maven Plugin Usage</li>
      </ul>
    </div>
  </header>

  <div class="main-body">
  <div class="row">
    <div class="span8">
      <div class="body-content">
<div class="page-header">
 <h1 id="content_package_maven_plugin_usage">Content Package Maven Plugin Usage</h1>
</div> 
<p>Examples for using the plugin.</p> 
<section> 
 <section> 
  <h3 id="Example_for_content_package_project">Example for content package project</h3> 
  <p>This is an example maven content-package project, which also contains a couple of convenience scripts to upload and download packages: <a class="externalLink" href="https://github.com/wcm-io/wcm-io-samples/tree/develop/content-packages/sample-content">https://github.com/wcm-io/wcm-io-samples/tree/develop/content-packages/sample-content</a></p> 
  <p>It relies on a default confugration for the plugin defined in <a class="externalLink" href="https://wcm.io/tooling/maven/aem-global-parent.html">AEM Global Parent</a>.</p> 
 </section> 
 <section> 
  <h3 id="Install_single_content_package_from_filesystem">Install single content package from filesystem</h3> 
  <div class="source"> 
   <div class="source"> 
    <pre>&lt;plugin&gt;
  &lt;groupId&gt;io.wcm.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;wcmio-content-package-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;serviceURL&gt;http://localhost:4502/crx/packmgr/service&lt;/serviceURL&gt;
    &lt;userId&gt;admin&lt;/userId&gt;
    &lt;password&gt;admin&lt;/password&gt;
    &lt;packageFile&gt;/path/to/content-package.zip&lt;/packageFile&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;
</pre> 
   </div> 
  </div> 
  <p>Command line:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>mvn wcmio-content-package:install
</pre> 
   </div> 
  </div> 
 </section> 
 <section> 
  <h3 id="Install_multiple_content_packages_from_maven_repository">Install multiple content packages from maven repository</h3> 
  <p>This usecase is useful to install hotfix and service pack packages to an AEM instance. The hotfixes have to be uploaded to an internal maven repository before, and can than deployed to any instance via maven using their artifact coordinates. Setting force to false ensures that the packages are installed only once, and not on every run.</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>&lt;plugin&gt;
  &lt;groupId&gt;io.wcm.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;wcmio-content-package-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;serviceURL&gt;http://localhost:4502/crx/packmgr/service&lt;/serviceURL&gt;
    &lt;userId&gt;admin&lt;/userId&gt;
    &lt;password&gt;admin&lt;/password&gt;
    &lt;!-- Skip upload if hotfix package was already uploaded before --&gt;
    &lt;force&gt;false&lt;/force&gt;
    &lt;packageFiles&gt;
      &lt;packageFile&gt;
        &lt;groupId&gt;groupId&lt;/groupId&gt;
        &lt;artifactId&gt;artifactId-1&lt;/artifactId&gt;
        &lt;version&gt;1.0.0&lt;/version&gt;
        &lt;type&gt;zip&lt;/type&gt;
      &lt;/packageFile&gt;
      &lt;packageFile&gt;
        &lt;groupId&gt;groupId&lt;/groupId&gt;
        &lt;artifactId&gt;artifactId-2&lt;/artifactId&gt;
        &lt;version&gt;1.0.0&lt;/version&gt;
        &lt;type&gt;zip&lt;/type&gt;
      &lt;/packageFile&gt;
    &lt;/packageFiles&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;
</pre> 
   </div> 
  </div> 
  <p>Command line:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>mvn wcmio-content-package:install
</pre> 
   </div> 
  </div> 
 </section> 
 <section> 
  <h3 id="Download_content_package_with_unpack_and_excludes">Download content package with unpack and excludes</h3> 
  <p>This downloads a content package back to the project from where it was uploaded from (using the Adobe <code>content-package-maven-plugin</code>). After download it is unpacked automatically, some files are excluded (not unpacked) and some properties are removed from the unpacked <code>.content.xml</code> files (to avoid unwanted changes in SCM commits when versioning the unpacked package contents).</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>&lt;plugin&gt;
  &lt;groupId&gt;io.wcm.maven.plugins&lt;/groupId&gt;
  &lt;artifactId&gt;wcmio-content-package-maven-plugin&lt;/artifactId&gt;
  &lt;configuration&gt;
    &lt;serviceURL&gt;http://localhost:4502/crx/packmgr/service&lt;/serviceURL&gt;
    &lt;userId&gt;admin&lt;/userId&gt;
    &lt;password&gt;admin&lt;/password&gt;
    &lt;excludeFiles&gt;
      &lt;exclude&gt;^META-INF/.*&lt;/exclude&gt;
      &lt;!-- exclude renditions that are automatically generated --&gt;
      &lt;exclude&gt;.*/cq5dam\.thumbnail\..*&lt;/exclude&gt;
    &lt;/excludeFiles&gt;
    &lt;excludeProperties&gt;
      &lt;exclude&gt;jcr\:created&lt;/exclude&gt;
      &lt;exclude&gt;jcr\:createdBy&lt;/exclude&gt;
      &lt;exclude&gt;jcr\:lastModified&lt;/exclude&gt;
      &lt;exclude&gt;jcr\:lastModifiedBy&lt;/exclude&gt;
      &lt;exclude&gt;cq\:lastModified&lt;/exclude&gt;
      &lt;exclude&gt;cq\:lastModifiedBy&lt;/exclude&gt;
    &lt;/excludeProperties&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;
</pre> 
   </div> 
  </div> 
  <p>Command line:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>mvn -Dvault.unpack=true wcmio-content-package:download
</pre> 
   </div> 
  </div> 
 </section> 
 <section> 
  <h3 id="Run_from_command_line_without_pom.xml_context">Run from command line without pom.xml context</h3> 
  <p>You can execute the <code>install</code> and <code>download</code> goals also directly from the command line without a pom.xml context. You have to pass all parameters as Java System parameters then as well.</p> 
  <p>Example for directly installing a package without a pom:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>mvn io.wcm.maven.plugins:wcmio-content-package-maven-plugin:${project.properties['releasedVersion.version']}:install \
    -Dvault.file=mypackage.zip \
    -Dvault.serviceURL=http://localhost:4502/crx/packmgr/service
</pre> 
   </div> 
  </div> 
  <p>The full list of available parameters (user property names) can be found in the <a href="plugin-info.html">plugin documentation</a>.</p> 
 </section> 
 <section> 
  <h3 id="HTTP_wire_logging">HTTP wire logging</h3> 
  <p>The Content Package Maven Plugin uses Apache HTTP Client 4 under the hood, and its logging is bridged to the Maven Logging System (using SLF4J).</p> 
  <p>To enable logging HTTP headers, use on the Maven command line:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>-Dorg.slf4j.simpleLogger.log.org.apache.http.headers=DEBUG
</pre> 
   </div> 
  </div> 
  <p>To enable complete HTTP wire logging (produces lots of logging data!), use:</p> 
  <div class="source"> 
   <div class="source"> 
    <pre>-Dorg.slf4j.simpleLogger.log.org.apache.http.wire=DEBUG
</pre> 
   </div> 
  </div> 
 </section> 
</section>
      </div>
    </div>
    <div class="span4">
      <div id="toc-sidebar">
        <div class="well">
          <ul class="nav nav-list">
            <li class="nav-header">Table of Contents</li>
    <li class="dropdown"><a href="#content_package_maven_plugin_usage" title="Content Package Maven Plugin Usage">Content Package Maven Plugin Usage <b class="caret"></b></a>
      <ul class="nav nav-list">
    <li><a href="#Example_for_content_package_project" title="Example for content package project">Example for content package project</a>
    <li><a href="#Install_single_content_package_from_filesystem" title="Install single content package from filesystem">Install single content package from filesystem</a>
    <li><a href="#Install_multiple_content_packages_from_maven_repository" title="Install multiple content packages from maven repository">Install multiple content packages from maven repository</a>
    <li><a href="#Download_content_package_with_unpack_and_excludes" title="Download content package with unpack and excludes">Download content package with unpack and excludes</a>
    <li><a href="#Run_from_command_line_without_pom.xml_context" title="Run from command line without pom.xml context">Run from command line without pom.xml context</a>
    <li><a href="#HTTP_wire_logging" title="HTTP wire logging">HTTP wire logging</a>
        <li class="divider"></li>
      </ul>
    </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  </div>

  </div>

  <!-- Footer
  ================================================== -->
  <footer class="well">
    <div class="container">
      <div class="row">
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Main</li>
            <li >
              <a href="../../../../" title="Home">Home</a>
            </li>
            <li >
              <a href="../../../../platforms.html" title="Platforms">Platforms</a>
            </li>
            <li >
              <a href="../../../../maven.html" title="Maven Repositories">Maven Repositories</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="GitHub project" class="externalLink">GitHub project</a>
            </li>
            <li >
              <a href="../../../../subprojects.html" title="Subprojects">Subprojects</a>
            </li>
            <li >
              <a href="http://www.apache.org/licenses/LICENSE-2.0.txt" title="License" class="externalLink">License</a>
            </li>
            <li >
              <a href="../../../../commercial-support.html" title="Commercial Support">Commercial Support</a>
            </li>
            <li >
              <a href="https://diva-e.com/en/imprint/" title="Imprint" class="externalLink">Imprint</a>
            </li>
            <li >
              <a href="../../../../privacy.html" title="Privacy Policy">Privacy Policy</a>
            </li>
          </ul>
        </div>
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Categories</li>
            <li >
              <a href="../../../../wcm/" title="WCM">WCM</a>
            </li>
            <li >
              <a href="../../../../dam/" title="DAM">DAM</a>
            </li>
            <li >
              <a href="../../../../caconfig/" title="Context-Aware Configuration">Context-Aware Configuration</a>
            </li>
            <li >
              <a href="../../../../handler/" title="Handler">Handler</a>
            </li>
            <li >
              <a href="../../../../sling/" title="Sling">Sling</a>
            </li>
            <li >
              <a href="../../../../testing/" title="Testing">Testing</a>
            </li>
            <li >
              <a href="../../../../samples/" title="Samples">Samples</a>
            </li>
            <li >
              <a href="../../../" title="Tooling">Tooling</a>
            </li>
          </ul>
        </div>
        <div class="span2 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Contribute</li>
            <li >
              <a href="../../../../contribute.html" title="Contribute">Contribute</a>
            </li>
            <li >
              <a href="../../../../manifest.html" title="Manifest">Manifest</a>
            </li>
            <li >
              <a href="https://wcm-io.atlassian.net" title="Issues" class="externalLink">Issues</a>
            </li>
            <li >
              <a href="https://wcm-io.atlassian.net/wiki/" title="Wiki" class="externalLink">Wiki</a>
            </li>
            <li >
              <a href="../../../../mailing-lists.html" title="Mailing Lists">Mailing Lists</a>
            </li>
            <li >
              <a href="https://github.com/wcm-io" title="Fork on GitHub" class="externalLink">Fork on GitHub</a>
            </li>
          </ul>
        </div>
        <div class="span3 bottom-nav">
          <ul class="nav nav-list">
            <li class="nav-header">Maven documentation</li>
            <li >
              <a href="project-info.html" title="Project Information">Project Information <i class="icon-chevron-right"></i></a>
            </li>
            <li >
              <a href="project-reports.html" title="Project Reports">Project Reports <i class="icon-chevron-right"></i></a>
            </li>
          </ul>
        </div>
        <div class="span3 bottom-description">
          <blockquote>wcm.io is an Open Source project which provides libraries and extensions for AEM-based applications.</blockquote>
        </div>
      </div>
    </div>
  </footer>

  <div class="container subfooter">
    <div class="row">
      <div class="span12">
        <p class="pull-right"><a href="#">Back to top</a></p>
        <p class="copyright">Copyright &copy;2014-2021 <a href="https://wcm.io">wcm.io</a>. All Rights Reserved.</p>
        <p class="version-date"><span class="projectVersion">Version: 2.0.1-SNAPSHOT. </span><span class="publishDate">Last Published: 2021-12-22. </span></p>
      </div>
    </div>
  </div>

  <!-- JavaScript
  ================================================== -->
  <script src="https://wcm.io/js/jquery.min.js"></script>
  <script src="https://wcm.io/js/bootstrap.min.js"></script>
  <script src="https://wcm.io/js/lightbox.min.js"></script>
  <script src="https://wcm.io/js/reflow-scroll.js"></script>
  <script src="https://wcm.io/js/highlight.min.js"></script>


  <script src="https://wcm.io/js/reflow-skin.js"></script>

  </body>
</html>